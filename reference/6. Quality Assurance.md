### 6.1 Test Scenarios

#### TS-001: 회원가입 및 인증

| Step | Action                  | Expected Result                    | Status |
| ---- | ----------------------- | ---------------------------------- | ------ |
| 1    | 전화번호 입력           | 형식 검증, "인증번호 받기" 활성화  | ☐      |
| 2    | "인증번호 받기" 탭      | SMS 발송, 코드 입력 필드 표시      | ☐      |
| 3    | 올바른 코드 입력        | 인증 성공, 역할 선택 화면 전환     | ☐      |
| 4    | 잘못된 코드 입력 (3회)  | 에러 메시지, 재전송 버튼 표시      | ☐      |
| 5    | 역할 선택 (농부/작업자) | 역할 저장, 해당 메인 화면으로 이동 | ☐      |

#### TS-002: 작업 등록 (농부)

| Step | Action                            | Expected Result                            | Status |
| ---- | --------------------------------- | ------------------------------------------ | ------ |
| 1    | [+ 새 작업 등록] 탭               | 작업 등록 화면 1단계 (작물 선택)           | ☐      |
| 2    | 작물 선택                         | 선택 하이라이트, [다음] 활성화             | ☐      |
| 3    | 작업 정보 입력 (제목, 기간, 급여) | 필수 필드 채워질 때마다 [다음] 활성화      | ☐      |
| 4    | 위치 설정 (지도에서 핀 이동)      | 주소 자동 표시                             | ☐      |
| 5    | 전화 가능 시간 입력               | 시간 picker, 안내 텍스트 표시              | ☐      |
| 6    | 미리보기에서 [등록하기]           | 작업 Firestore 저장, 농부 메인 목록에 표시 | ☐      |
| 7    | 등록된 작업 확인                  | contactRequestCount=0, 카드에 표시         | ☐      |

#### TS-003: 작업 검색 및 조회 (작업자)

| Step | Action                       | Expected Result                     | Status |
| ---- | ---------------------------- | ----------------------------------- | ------ |
| 1    | 작업자 메인 화면 진입        | 위치 권한 요청                      | ☐      |
| 2    | 위치 권한 허용               | 지도에 근처 작업 마커 표시          | ☐      |
| 3    | 마커 탭                      | 미니 카드 팝업 (작물명, 거리, 급여) | ☐      |
| 4    | [상세보기] 탭                | 작업 상세 화면으로 이동             | ☐      |
| 5    | 리스트 뷰로 전환             | 거리순 정렬된 작업 목록 표시        | ☐      |
| 6    | 필터 적용 (작물, 거리, 급여) | 조건에 맞는 작업만 표시             | ☐      |

#### TS-004: 연락 요청 전송 (작업자)

| Step | Action                                  | Expected Result                               | Status |
| ---- | --------------------------------------- | --------------------------------------------- | ------ |
| 1    | 작업 상세 화면에서 [연락하고 싶어요] 탭 | 연락 요청 다이얼로그 표시                     | ☐      |
| 2    | 내 전화번호 확인 (자동 입력)            | 수정 가능                                     | ☐      |
| 3    | 통화 가능 시간 입력                     | 시간 picker                                   | ☐      |
| 4    | 한마디 메시지 입력 (선택)               | 50자 제한                                     | ☐      |
| 5    | 동의 체크박스 클릭                      | [요청 보내기] 활성화                          | ☐      |
| 6    | [요청 보내기] 탭                        | ContactRequests 생성, 요청 성공 메시지        | ☐      |
| 7    | 농부에게 푸시 알림 발송 확인            | 5초 이내 알림 도착                            | ☐      |
| 8    | 작업 상세에서 버튼 변경                 | [요청 보냄] (비활성화)                        | ☐      |
| 9    | 동일 작업에 재요청 시도                 | "이미 연락 요청을 보냈습니다" 에러            | ☐      |
| 10   | 하루 20건 초과 시도                     | "오늘은 더 이상 요청을 보낼 수 없습니다" 에러 | ☐      |

#### TS-005: 연락 요청 수락 (농부)

| Step | Action                         | Expected Result                              | Status |
| ---- | ------------------------------ | -------------------------------------------- | ------ |
| 1    | 푸시 알림 수신                 | "새로운 연락 요청" 알림                      | ☐      |
| 2    | 알림 탭                        | 연락 요청 목록 화면으로 이동                 | ☐      |
| 3    | 작업자 정보 확인               | 전화번호, 가능 시간, 메시지 표시             | ☐      |
| 4    | [연락하기] 탭                  | 수락 확인 다이얼로그 표시                    | ☐      |
| 5    | 동의 체크박스 클릭             | [연락하기] 활성화                            | ☐      |
| 6    | [연락하기] 확정                | ContactRequests 업데이트 (status='accepted') | ☐      |
| 7    | 작업자에게 푸시 알림 발송 확인 | "연락처가 교환되었습니다!" + 농부 번호       | ☐      |
| 8    | 연락처 교환 완료 화면          | 작업자 번호 + [전화 걸기] 버튼               | ☐      |
| 9    | [전화 걸기] 탭                 | 전화 앱 실행 (tel: URI)                      | ☐      |

#### TS-006: 연락처 교환 완료 (작업자 측)

| Step | Action                 | Expected Result                        | Status |
| ---- | ---------------------- | -------------------------------------- | ------ |
| 1    | 푸시 알림 수신         | "연락처가 교환되었습니다!" + 농부 번호 | ☐      |
| 2    | 알림 탭                | 알림 센터의 교환 완료 알림으로 이동    | ☐      |
| 3    | 농부 전화번호 확인     | 큰 폰트, 선택 가능                     | ☐      |
| 4    | 통화 가능 시간 확인    | 명확히 표시                            | ☐      |
| 5    | [전화 걸기] 탭         | 전화 앱 실행                           | ☐      |
| 6    | 내 연락 요청 현황 확인 | "수락됨" 탭에 해당 요청 표시           | ☐      |

#### TS-007: 연락 요청 거절 (농부)

| Step | Action                         | Expected Result                        | Status |
| ---- | ------------------------------ | -------------------------------------- | ------ |
| 1    | 연락 요청 목록에서 [나중에] 탭 | 해당 카드가 목록에서 제거 (페이드아웃) | ☐      |
| 2    | ContactRequests 상태 확인      | status='rejected'                      | ☐      |
| 3    | 작업자에게 알림 미발송 확인    | 작업자는 여전히 'pending'으로 보임     | ☐      |

#### TS-008: 연락 요청 자동 만료

| Step | Action                    | Expected Result            | Status |
| ---- | ------------------------- | -------------------------- | ------ |
| 1    | 요청 생성 후 7일 경과     | Cloud Function이 자동 실행 | ☐      |
| 2    | ContactRequests 상태 확인 | status='expired'           | ☐      |
| 3    | 작업자 현황에서 확인      | "만료됨" 탭에 표시         | ☐      |

#### TS-009: 신고 및 자동 제재

| Step | Action                    | Expected Result                        | Status |
| ---- | ------------------------- | -------------------------------------- | ------ |
| 1    | 작업 상세에서 [신고] 탭   | 신고 다이얼로그 표시                   | ☐      |
| 2    | 신고 사유 선택, 내용 입력 | Reports 문서 생성                      | ☐      |
| 3    | 동일 대상 3건 누적        | Cloud Function 자동 조치 트리거        | ☐      |
| 4    | 작업 신고 → 작업 숨김     | status='deleted', 작업자 화면에서 제거 | ☐      |
| 5    | 사용자 신고 → 계정 정지   | isActive=false, 로그인 차단            | ☐      |
| 6    | 관리자 이메일 발송 확인   | 조치 내역 포함                         | ☐      |

#### TS-010: 오프라인 모드

| Step | Action             | Expected Result                       | Status |
| ---- | ------------------ | ------------------------------------- | ------ |
| 1    | 네트워크 연결 끊기 | 앱 계속 사용 가능                     | ☐      |
| 2    | 작업 목록 조회     | 캐시된 데이터 표시                    | ☐      |
| 3    | 새 작업 등록 시도  | "네트워크 연결을 확인해주세요" 메시지 | ☐      |
| 4    | 네트워크 재연결    | 자동 동기화, 새 데이터 로드           | ☐      |

### 6.2 Performance Testing

| Test Case                | Target              | Measurement Method              | Status |
| ------------------------ | ------------------- | ------------------------------- | ------ |
| 앱 초기 로딩 시간        | < 3초               | 스플래시 → 메인 화면 타이머     | ☐      |
| Firestore 쿼리 응답 시간 | < 1초               | Firebase Performance Monitoring | ☐      |
| 지도 렌더링 프레임률     | 60 FPS              | Flutter DevTools                | ☐      |
| 이미지 로딩 시간         | < 2초               | 네트워크 속도별 테스트          | ☐      |
| 푸시 알림 전송 시간      | < 5초               | 트리거 → 수신 타이머            | ☐      |
| 저사양 기기 (4GB RAM)    | 정상 동작           | 실제 기기 테스트                | ☐      |
| 저속 네트워크 (3G)       | 기본 기능 사용 가능 | 네트워크 제한 시뮬레이션        | ☐      |

### 6.3 Security Testing

| Test Case                                      | Expected Result                                          | Status |
| ---------------------------------------------- | -------------------------------------------------------- | ------ |
| 미인증 사용자 Firestore 접근                   | PERMISSION_DENIED                                        | ☐      |
| 타인의 UserProfile 조회 시도                   | PERMISSION_DENIED                                        | ☐      |
| 타인의 작업 수정/삭제 시도                     | PERMISSION_DENIED                                        | ☐      |
| 동의 없이 연락 요청 생성 (workerConsent=false) | PERMISSION_DENIED                                        | ☐      |
| 농부가 아닌 사용자가 요청 수락 시도            | PERMISSION_DENIED                                        | ☐      |
| 중복 연락 요청 (workerId + jobId 동일)         | 클라이언트: 에러, Firestore: 규칙 차단                   | ☐      |
| Rate Limiting 우회 시도 (하루 20건 초과)       | 클라이언트: 차단, 서버: 추가 검증 필요 시 Cloud Function | ☐      |
| SQL Injection / XSS 시도                       | Firestore는 NoSQL이므로 자동 방어                        | ☐      |

### 6.4 Accessibility Testing

| Test Case                                     | Requirement              | Status |
| --------------------------------------------- | ------------------------ | ------ |
| 스크린 리더 (iOS VoiceOver, Android TalkBack) | 모든 UI 요소 읽기 가능   | ☐      |
| 색상 대비                                     | WCAG 2.1 AA 준수 (4.5:1) | ☐      |
| 폰트 크기 조정                                | 시스템 폰트 크기 반영    | ☐      |
| 터치 영역                                     | 최소 48x48dp             | ☐      |

---
